# AGENTS.md

本文件用于约束 AI 在本仓库中的协作方式。

## 命令与检索偏好
- 优先使用 `rg`，不要默认使用 `Get-Content`。
- 常用方式：
  - 列出文件：`rg --files`
  - 搜索文本：`rg -n "pattern" <path>`
  - 带上下文搜索：`rg -n -C 3 "pattern" <path>`
- 仅在必须完整查看文件原文时使用 `Get-Content`。

## 版本约定
- 每次修改脚本都要递增小版本号（patch），并同步更新脚本内用于控制台打印的版本常量，便于确认变更已生效。

## 发布流程（dev -> main）
- 当用户准备将 `dev` 分支合并到 `main`，或要求 AI 生成该合并的 PR 信息时，AI 必须先提醒：先完整执行以下发布流程，再进行 PR 文案与合并动作。
- 标准发布流程：
  1. 确认源码改动已完成（如 `src/` 内模块）。
  2. 递增补丁版本号（patch），并确保 `@version` 与脚本内版本常量一致。
  3. 执行构建，生成最新 `better-github-nav.user.js`（发布文件）。
  4. 本地自检产物（至少检查脚本头版本号、控制台版本常量、关键功能是否可用）。
  5. 将源码改动与构建产物一并提交到 `dev`。
  6. 仅在以上步骤完成后，再编写/提交 `dev -> main` 的 PR 信息。

## 输出要求
- 默认使用中文
- 如果要求生成git提交信息，使用英文
